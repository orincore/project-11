<!DOCTYPE html>
<html>
<head>
    <title>Test Form2Chat API</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        pre { background: #f4f4f4; padding: 15px; border-radius: 5px; overflow-x: auto; }
        button { padding: 10px 15px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        #result { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Test Form2Chat API</h1>
    <p>Click the button below to test the API with the following payload:</p>
    <pre id="payload">
{
    "name": "Sushant Suradkar",
    "email": "sushant@orincore.com",
    "phone": "+917058966107",
    "message": "Test message with simple client"
}
    </pre>
    
    <button id="testButton">Test API</button>
    
    <div id="result">
        <h3>Response:</h3>
        <pre id="response">Click the button to test the API</pre>
    </div>

    <script>
        document.getElementById('testButton').addEventListener('click', async () => {
            const button = document.getElementById('testButton');
            const responseElement = document.getElementById('response');
            
            button.disabled = true;
            button.textContent = 'Sending...';
            responseElement.textContent = 'Sending request...';
            
            try {
                const payload = {
                    name: "Sushant Suradkar",
                    email: "sushant@orincore.com",
                    phone: "+917058966107",
                    message: "Test message with simple client"
                };
                
                const response = await fetch('https://form2chat.onrender.com/api/contact-form', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': 'your_api_key_here', // Replace with your actual API key
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });
                
                let responseData;
                try {
                    responseData = await response.json();
                } catch (e) {
                    responseData = { error: 'Failed to parse JSON response', raw: await response.text() };
                }
                
                const result = {
                    status: response.status,
                    statusText: response.statusText,
                    headers: Object.fromEntries(response.headers.entries()),
                    data: responseData
                };
                
                responseElement.textContent = JSON.stringify(result, null, 2);
                
                if (!response.ok) {
                    console.error('API Error:', result);
                } else {
                    console.log('API Success:', result);
                }
            } catch (error) {
                console.error('Error:', error);
                responseElement.textContent = `Error: ${error.message}\n\n${error.stack || ''}`;
            } finally {
                button.disabled = false;
                button.textContent = 'Test API Again';
            }
        });
    </script>
</body>
</html>
